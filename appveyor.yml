version: 0.1.{build}

branches:
  only:
    - master
    - production

skip_tags: true

init:
  - git config --global core.autocrlf true

environment:
  matrix:
    - nodejs_version: "0.10"
    - nodejs_version: "4"

services:
  - mongodb

install:
  - ps: Install-Product node $env:nodejs_version
  - npm install

test_script:
  - node --version
  - npm --version

artifacts:
  - path: wwwroot/**
    name: appDeploy

notifications:
  - provider: GitHubPullRequest
    auth_token:
    secure: a1HfoM4ghkJrkePgUskwyS6zOUCFIiAc4toLyMTNPi2AOLZSZ3Xdl0PzM/SbHGYz
    on_build_success: true
    on_build_failure: true
    on_build_status_changed: true

# Don't actually build.
#build: off
  
